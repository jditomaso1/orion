<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Team Chat â€” Orion</title>
  <!-- Favicon -->
  <link rel="icon" type="image/png"
        href="https://raw.githubusercontent.com/jditomaso1/private-credit-marketing/main/img/favicon.png?v=2" />
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Base Styles -->
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #f5f6f8;
    }
  </style>
</head>

<body class="flex">

  <!-- SIDEBAR -->
  <div id="sidebar-placeholder"></div>
  <script>
    async function injectSidebar() {
      const res = await fetch("/dnb/sidebar.html");
      document.getElementById("sidebar-placeholder").innerHTML = await res.text();

      window.toggleSection = function(id) {
        const section = document.getElementById(id);
        const icon = document.getElementById("icon-" + id);
        if (!section || !icon) return;

        section.classList.toggle("hidden");
        icon.style.transform = section.classList.contains("hidden") ? "rotate(0deg)" : "rotate(90deg)";
        localStorage.setItem("sidebar-open-section", id);
      };

      const last = localStorage.getItem("sidebar-open-section");
      if (last) {
        const s = document.getElementById(last);
        const i = document.getElementById("icon-" + last);
        if (s && i) {
          s.classList.remove("hidden");
          i.style.transform = "rotate(90deg)";
        }
      }
    }
    injectSidebar();
  </script>

  <!-- MAIN CONTENT -->
  <main class="flex-1 ml-64 p-8 flex flex-col">
<section class="card projections" aria-labelledby="proj-title">
  <style>
    .card.projections{
      border:1px solid #e6e6e6;border-radius:14px;padding:16px;background:#fff;
      max-width:980px
    }
    .card.projections h2{margin:0 0 10px;font:600 18px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .subnote{margin:0 0 12px;color:#666;font:12px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .table-wrap{overflow:auto;border:1px solid #eee;border-radius:12px}
    table{width:100%;border-collapse:separate;border-spacing:0;min-width:720px}
    thead th{
      position:sticky;top:0;background:#fafafa;z-index:1;
      text-align:right;padding:12px 12px;border-bottom:1px solid #eee;
      font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#333
    }
    thead th:first-child{text-align:left}
    tbody td{
      padding:12px 12px;border-bottom:1px solid #f0f0f0;
      font:13px/1.3 system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#111
    }
    tbody tr:last-child td{border-bottom:0}
    tbody td:first-child{font-weight:600;text-align:left;color:#222;white-space:nowrap}
    tbody td:not(:first-child){text-align:right;white-space:nowrap}
    .muted{color:#666;font-weight:500}
    .pill{
      display:inline-block;padding:2px 8px;border-radius:999px;
      background:#f2f2f2;color:#444;font:600 11px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial
    }
  </style>

  <h2 id="proj-title">Financial Projections <span class="pill">Base Case</span></h2>
  <p class="subnote">All figures in USD millions unless noted</p>

  <div class="table-wrap" role="region" aria-label="Financial projections table">
    <table>
      <thead>
        <tr>
          <th scope="col">Metric</th>
          <th scope="col">2024A</th>
          <th scope="col">2025E</th>
          <th scope="col">2026E</th>
          <th scope="col">2027E</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Revenue</td>
          <td>$2,133</td>
          <td>$2,220</td>
          <td>$2,310</td>
          <td>$2,405</td>
        </tr>
        <tr>
          <td>EBITDA</td>
          <td>$506</td>
          <td>$540</td>
          <td>$565</td>
          <td>$590</td>
        </tr>
        <tr>
          <td>EBITDA Margin</td>
          <td>23.7%</td>
          <td>24.3%</td>
          <td>24.5%</td>
          <td>24.5%</td>
        </tr>
        <tr>
          <td>CapEx</td>
          <td>$120</td>
          <td>$130</td>
          <td>$135</td>
          <td>$140</td>
        </tr>
        <tr>
          <td>FCF</td>
          <td>$260</td>
          <td>$285</td>
          <td>$305</td>
          <td>$320</td>
        </tr>
        <tr>
          <td>Net Leverage</td>
          <td class="muted">X.Xx</td>
          <td class="muted">X.Xx</td>
          <td class="muted">X.Xx</td>
          <td class="muted">X.Xx</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

</main>

  <!-- Chat Logic -->
  <script>
    const input = document.getElementById("chatInput");
    const btn = document.getElementById("sendBtn");
    const windowEl = document.getElementById("chatWindow");

    function sendMessage() {
      const text = input.value.trim();
      if (!text) return;

      const msg = document.createElement("div");
      msg.className = "flex items-start gap-3";

      msg.innerHTML = `
        <div class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-semibold">J</div>
        <div>
          <div class="font-semibold text-gray-800">You <span class="text-gray-400 text-xs ml-2">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span></div>
          <div class="bg-blue-50 p-3 rounded-lg text-sm text-gray-800 max-w-xl border border-blue-200">
            ${text}
          </div>
        </div>
      `;

      windowEl.appendChild(msg);
      windowEl.scrollTop = windowEl.scrollHeight;

      input.value = "";
    }

    btn.onclick = sendMessage;
    input.addEventListener("keypress", e => {
      if (e.key === "Enter") sendMessage();
    });
  </script>
    <!--Ask Orion Bot -->
    <div id="orion-chat-include"></div>
    <script>
      async function loadOrionChat() {
        const res = await fetch("/dnb/includes/orion-chat.html");
        const html = await res.text();
    
        // Insert into DOM
        const container = document.getElementById("orion-chat-include");
        container.innerHTML = html;
    
        // --- EXECUTE SCRIPTS ---
        const scripts = container.querySelectorAll("script");
        scripts.forEach(oldScript => {
          const newScript = document.createElement("script");
          if (oldScript.src) {
            newScript.src = oldScript.src;
          } else {
            newScript.textContent = oldScript.textContent;
          }
          document.body.appendChild(newScript);
          oldScript.remove();
        });
      }
    
      loadOrionChat();
    </script>
</body>
</html>
