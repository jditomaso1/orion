<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Portfolio Overview — Orion</title>
  <!-- Favicon -->
  <link rel="icon" type="image/png"
        href="https://raw.githubusercontent.com/jditomaso1/private-credit-marketing/main/img/favicon.png?v=2" />
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <style>
    body { font-family: Poppins, sans-serif; }
  </style>
</head>

<body class="flex bg-gray-50 text-gray-900">
  
<!-- ========================================================= -->
<!-- SIDEBAR -->
<!-- ========================================================= -->
<div id="sidebar-placeholder"></div>

<script>
async function injectSidebar() {
  const res = await fetch("/private-credit/sidebar.html");
  document.getElementById("sidebar-placeholder").innerHTML = await res.text();

  window.toggleSection = function(id) {
    const s = document.getElementById(id);
    const i = document.getElementById("icon-" + id);
    if (!s || !i) return;
    s.classList.toggle("hidden");
    i.style.transform = s.classList.contains("hidden") ? "rotate(0deg)" : "rotate(90deg)";
    localStorage.setItem("sidebar-open-section", id);
  };

  const last = localStorage.getItem("sidebar-open-section");
  if (last) {
    const s = document.getElementById(last);
    const i = document.getElementById("icon-" + last);
    if (s && i) { s.classList.remove("hidden"); i.style.transform = "rotate(90deg)"; }
  }
}
injectSidebar();
</script>


<!-- ========================================================= -->
<!-- MAIN CONTENT -->
<!-- ========================================================= -->
<main class="flex-1 ml-64 p-8 space-y-8">

  <!-- PAGE HEADER -->
  <section class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-semibold tracking-tight flex items-center gap-2">
        <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
        Portfolio Overview
      </h1>
      <p class="text-gray-500 text-xs mt-1">
        As of 2025-09-27 — Mock data
      </p>
    </div>

    <div class="flex gap-2 text-xs">
      <span class="px-3 py-1.5 border rounded-xl bg-white">Accounts: 12</span>
      <span class="px-3 py-1.5 border rounded-xl bg-white">In-Compliance: 92%</span>
    </div>
  </section>


  <!-- METRIC GRID -->
  <section class="grid grid-cols-12 gap-4">
    <!-- Metric cards -->
    <div class="col-span-12 grid grid-cols-2 md:grid-cols-4 xl:grid-cols-8 gap-3">

      <!-- Each card -->
      <div class="p-4 bg-white border rounded-xl">
        <div class="text-xs text-gray-500">Total Exposure</div>
        <div class="text-lg font-semibold">$4.6bn</div>
      </div>

      <div class="p-4 bg-white border rounded-xl">
        <div class="text-xs text-gray-500"># Deals</div>
        <div class="text-lg font-semibold">83</div>
      </div>

      <div class="p-4 bg-white border rounded-xl">
        <div class="text-xs text-gray-500">Avg Spread (bps)</div>
        <div class="text-lg font-semibold">463</div>
      </div>

      <div class="p-4 bg-white border rounded-xl">
        <div class="text-xs text-gray-500">Wtd Avg Leverage</div>
        <div class="text-lg font-semibold">4.7x</div>
      </div>

      <div class="p-4 bg-white border rounded-xl">
        <div class="text-xs text-gray-500">Wtd Avg Maturity</div>
        <div class="text-lg font-semibold">4.2 yrs</div>
      </div>

      <div class="p-4 bg-white border rounded-xl">
        <div class="text-xs text-gray-500">% Floating</div>
        <div class="text-lg font-semibold">88%</div>
      </div>

      <div class="p-4 bg-white border rounded-xl">
        <div class="text-xs text-gray-500">Cash (Avail.)</div>
        <div class="text-lg font-semibold">$210mm</div>
      </div>

      <div class="p-4 bg-white border rounded-xl">
        <div class="text-xs text-gray-500">30D Net CF</div>
        <div class="text-lg font-semibold">+$38mm</div>
      </div>

    </div>
  </section>


  <!-- INDUSTRY + RATINGS ROW -->
  <section class="grid grid-cols-12 gap-6">

    <!-- INDUSTRY CONCENTRATION -->
    <div class="col-span-12 lg:col-span-6 bg-white border rounded-2xl p-6">
      <h2 class="font-semibold text-sm mb-4 flex items-center gap-2">
        <i data-lucide="briefcase" class="w-4 h-4"></i> Industry Concentration
      </h2>

      <div class="space-y-3 text-sm">
        <div>
          <div class="flex justify-between"><span>Software</span><span>28%</span></div>
          <div class="h-2 bg-gray-100 rounded"><div class="h-2 bg-gray-700 rounded" style="width:28%"></div></div>
        </div>
        <div>
          <div class="flex justify-between"><span>Healthcare</span><span>19%</span></div>
          <div class="h-2 bg-gray-100 rounded"><div class="h-2 bg-gray-700 rounded" style="width:19%"></div></div>
        </div>
        <div>
          <div class="flex justify-between"><span>Consumer</span><span>16%</span></div>
          <div class="h-2 bg-gray-100 rounded"><div class="h-2 bg-gray-700 rounded" style="width:16%"></div></div>
        </div>
        <div>
          <div class="flex justify-between"><span>Industrials</span><span>14%</span></div>
          <div class="h-2 bg-gray-100 rounded"><div class="h-2 bg-gray-700 rounded" style="width:14%"></div></div>
        </div>
        <div>
          <div class="flex justify-between"><span>Other</span><span>23%</span></div>
          <div class="h-2 bg-gray-100 rounded"><div class="h-2 bg-gray-700 rounded" style="width:23%"></div></div>
        </div>
      </div>
    </div>

    <!-- RATINGS -->
    <div class="col-span-12 lg:col-span-6 bg-white border rounded-2xl p-6">
      <h2 class="font-semibold text-sm mb-4 flex items-center gap-2">
        <i data-lucide="target" class="w-4 h-4"></i> Ratings Concentration
      </h2>

      <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-center">
        <div>
          <div class="text-2xl font-semibold">32%</div>
          <div class="text-xs text-gray-500 mt-1">BB / BB-</div>
        </div>
        <div>
          <div class="text-2xl font-semibold">25%</div>
          <div class="text-xs text-gray-500 mt-1">B+ / B</div>
        </div>
        <div>
          <div class="text-2xl font-semibold">18%</div>
          <div class="text-xs text-gray-500 mt-1">B-</div>
        </div>
        <div>
          <div class="text-2xl font-semibold">25%</div>
          <div class="text-xs text-gray-500 mt-1">Unrated</div>
        </div>
      </div>
    </div>

  </section>


  <!-- MATURITY + CASHFLOWS ROW -->
  <section class="grid grid-cols-12 gap-6">

    <!-- MATURITY LADDER -->
    <!--<div class="col-span-12 lg:col-span-6 bg-white border rounded-2xl p-6">-->
    <div class="col-span-12 lg:col-span-6 bg-white border rounded-2xl p-6 h-[300px]">
      <h2 class="font-semibold text-sm mb-4 flex items-center gap-2">
        <i data-lucide="calendar" class="w-4 h-4"></i> Maturity Ladder
      </h2>

      <div class="space-y-3 text-sm">
        <div class="flex items-center justify-between">
          <div class="flex-1 h-2 bg-gray-100 rounded mr-4"><div class="h-2 bg-gray-700 rounded" style="width:40%"></div></div>
          <span>$830mm</span>
        </div>
        <div class="flex items-center justify-between">
          <div class="flex-1 h-2 bg-gray-100 rounded mr-4"><div class="h-2 bg-gray-700 rounded" style="width:55%"></div></div>
          <span>$1.01bn</span>
        </div>
        <div class="flex items-center justify-between">
          <div class="flex-1 h-2 bg-gray-100 rounded mr-4"><div class="h-2 bg-gray-700 rounded" style="width:70%"></div></div>
          <span>$1.24bn</span>
        </div>
        <div class="flex items-center justify-between">
          <div class="flex-1 h-2 bg-gray-100 rounded mr-4"><div class="h-2 bg-gray-700 rounded" style="width:30%"></div></div>
          <span>$690mm</span>
        </div>
        <div class="flex items-center justify-between">
          <div class="flex-1 h-2 bg-gray-100 rounded mr-4"><div class="h-2 bg-gray-700 rounded" style="width:40%"></div></div>
          <span>$830mm</span>
        </div>
      </div>
    </div>

    <!-- CASHFLOWS -->
    <div class="col-span-12 lg:col-span-6 bg-white border rounded-2xl p-6 h-[300px]">
    <!--<div class="col-span-12 lg:col-span-6 bg-white border rounded-2xl p-6">-->
      <h2 class="font-semibold text-sm mb-4 flex items-center gap-2">
        <i data-lucide="line-chart" class="w-4 h-4"></i> Cashflows (90d)
      </h2>

      <canvas id="cfChart" class="h-40"></canvas>

      <p class="text-xs text-gray-500 mt-3">
        Net +$38mm over last 30 days • Cumulative +$96mm over 90 days
      </p>
    </div>

  </section>


  <!-- TOP 5 TABLES -->
  <section class="grid grid-cols-12 gap-6">

    <!-- TOP 5 PERFORMERS -->
    <div class="col-span-12 lg:col-span-6 bg-white border rounded-2xl p-6">
      <h2 class="font-semibold text-sm mb-4 flex items-center gap-2">
        <i data-lucide="trending-up" class="w-4 h-4"></i> Top 5 Performers
      </h2>

      <table class="w-full text-sm">
        <thead class="text-gray-500 text-xs border-b">
          <tr>
            <th class="py-1 text-left">Issuer</th>
            <th>MoM Px</th>
            <th>P&L ($mm)</th>
            <th>Exposure</th>
          </tr>
        </thead>
        <tbody>
          <tr><td class="py-1">VetWell Group</td><td>+1.6</td><td>+4.2</td><td>$95mm</td></tr>
          <tr><td class="py-1">RiverPoint SW</td><td>+1.3</td><td>+3.6</td><td>$80mm</td></tr>
          <tr><td class="py-1">NorthPeak SaaS</td><td>+1.1</td><td>+3.1</td><td>$74mm</td></tr>
          <tr><td class="py-1">GreenFields Food</td><td>+0.9</td><td>+2.2</td><td>$52mm</td></tr>
          <tr><td class="py-1">Coastal Logistics</td><td>+0.8</td><td>+1.7</td><td>$49mm</td></tr>
        </tbody>
      </table>
    </div>

    <!-- TOP 5 WATCHLIST -->
    <div class="col-span-12 lg:col-span-6 bg-white border rounded-2xl p-6">
      <h2 class="font-semibold text-sm mb-4 flex items-center gap-2">
        <i data-lucide="alert-octagon" class="w-4 h-4"></i> Top 5 Watchlist
      </h2>

      <table class="w-full text-sm">
        <thead class="text-gray-500 text-xs border-b">
          <tr>
            <th class="py-1 text-left">Issuer</th>
            <th>MoM Px</th>
            <th>Trigger</th>
            <th>Exposure</th>
          </tr>
        </thead>
        <tbody>
          <tr><td class="py-1">MidTown Retail</td><td>-2.4</td><td>Soft comps</td><td>$41mm</td></tr>
          <tr><td class="py-1">Ardent Chem</td><td>-1.9</td><td>RM volatility</td><td>$58mm</td></tr>
          <tr><td class="py-1">NovaCloud</td><td>-1.5</td><td>Churn uptick</td><td>$66mm</td></tr>
          <tr><td class="py-1">TrueCare Clinics</td><td>-1.4</td><td>Reimbursement</td><td>$38mm</td></tr>
          <tr><td class="py-1">Everrall</td><td>-1.2</td><td>Leverage</td><td>$47mm</td></tr>
        </tbody>
      </table>
    </div>

  </section>

</main>


<!-- =================================================================== -->
<!-- OPTIONAL: CASHFLOW MINI-CHART JS (simple sparkline) -->
<!-- =================================================================== -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const ctx = document.getElementById("cfChart");
  new Chart(ctx, {
    type: "line",
    data: {
      labels: ["Day 1","Day 10","Day 20","Day 30","Day 40","Day 60","Day 90"],
      datasets: [{
        data: [5,10,7,15,18,22,24],
        borderWidth: 1.6,
        tension: 0.35,
        fill: false,
        borderColor: "#111",
        pointRadius: 0
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false }},
      scales: {
        x: { display: false },
        y: { display: false }
      }
    }
  });

  lucide.createIcons();
});
</script>
    <!--Ask Orion Bot -->
    <div id="orion-chat-include"></div>
    <script>
      async function loadOrionChat() {
        const res = await fetch("/private-credit/includes/orion-chat.html");
        const html = await res.text();
    
        // Insert into DOM
        const container = document.getElementById("orion-chat-include");
        container.innerHTML = html;
    
        // --- EXECUTE SCRIPTS ---
        const scripts = container.querySelectorAll("script");
        scripts.forEach(oldScript => {
          const newScript = document.createElement("script");
          if (oldScript.src) {
            newScript.src = oldScript.src;
          } else {
            newScript.textContent = oldScript.textContent;
          }
          document.body.appendChild(newScript);
          oldScript.remove();
        });
      }
    
      loadOrionChat();
    </script>
</body>
</html>
